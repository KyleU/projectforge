// Code generated by qtc from "FileStats.html". DO NOT EDIT.
// See https://github.com/valyala/quicktemplate for details.

//line views/vproject/FileStats.html:1
package vproject

//line views/vproject/FileStats.html:1
import (
	"path/filepath"
	"strings"

	"github.com/samber/lo"
	"golang.org/x/exp/slices"

	"projectforge.dev/projectforge/app"
	"projectforge.dev/projectforge/app/controller/cutil"
	"projectforge.dev/projectforge/app/project"
	"projectforge.dev/projectforge/app/project/stats"
	"projectforge.dev/projectforge/app/util"
	"projectforge.dev/projectforge/views/components"
	"projectforge.dev/projectforge/views/layout"
)

//line views/vproject/FileStats.html:17
import (
	qtio422016 "io"

	qt422016 "github.com/valyala/quicktemplate"
)

//line views/vproject/FileStats.html:17
var (
	_ = qtio422016.Copy
	_ = qt422016.AcquireByteBuffer
)

//line views/vproject/FileStats.html:17
type FileStats struct {
	layout.Basic
	Project *project.Project
	Path    []string
	Ext     string
	Files   stats.FileStats
}

//line views/vproject/FileStats.html:25
func (p *FileStats) StreamBody(qw422016 *qt422016.Writer, as *app.State, ps *cutil.PageState) {
//line views/vproject/FileStats.html:25
	qw422016.N().S(`
`)
//line views/vproject/FileStats.html:27
	prj := p.Project

//line views/vproject/FileStats.html:28
	qw422016.N().S(`  `)
//line views/vproject/FileStats.html:29
	StreamSummary(qw422016, prj, "/"+strings.Join(p.Path, "/"), nil, nil, nil, nil, ps)
//line views/vproject/FileStats.html:29
	qw422016.N().S(`
  <div class="card">
    <div class="right"><a href="#modal-stats"><button type="button">JSON</button></a></div>
    <h3>File Statistics</h3>
    <h3>`)
//line views/vproject/FileStats.html:33
	streampathLinks(qw422016, p.Path, p.Ext)
//line views/vproject/FileStats.html:33
	qw422016.N().S(`</h3>
  </div>
  <div class="card tabs">
    <input name="type" type="radio" id="stat-summary" class="input" checked="checked" />
    <label for="stat-summary" class="label">Summary</label>
    <div class="panel">
      <em>`)
//line views/vproject/FileStats.html:39
	qw422016.N().D(p.Files.Count())
//line views/vproject/FileStats.html:39
	qw422016.N().S(` files totalling `)
//line views/vproject/FileStats.html:39
	qw422016.E().S(util.ByteSizeSI(p.Files.TotalSize()))
//line views/vproject/FileStats.html:39
	qw422016.N().S(`</em>
    </div>

    <input name="type" type="radio" id="stat-files" class="input" />
    <label for="stat-files" class="label">Files</label>
    <div class="panel">`)
//line views/vproject/FileStats.html:44
	streamrenderFiles(qw422016, p.Path, p.Files, p.Ext, as, ps)
//line views/vproject/FileStats.html:44
	qw422016.N().S(`</div>

    <input name="type" type="radio" id="stat-types" class="input" />
    <label for="stat-types" class="label">Types</label>
    <div class="panel">`)
//line views/vproject/FileStats.html:48
	streamrenderTypes(qw422016, p.Path, p.Files, p.Ext, as, ps)
//line views/vproject/FileStats.html:48
	qw422016.N().S(`</div>
  </div>
`)
//line views/vproject/FileStats.html:50
	components.StreamJSONModal(qw422016, "stats", "File Stats JSON", p.Files, 1)
//line views/vproject/FileStats.html:50
	qw422016.N().S(`
`)
//line views/vproject/FileStats.html:51
}

//line views/vproject/FileStats.html:51
func (p *FileStats) WriteBody(qq422016 qtio422016.Writer, as *app.State, ps *cutil.PageState) {
//line views/vproject/FileStats.html:51
	qw422016 := qt422016.AcquireWriter(qq422016)
//line views/vproject/FileStats.html:51
	p.StreamBody(qw422016, as, ps)
//line views/vproject/FileStats.html:51
	qt422016.ReleaseWriter(qw422016)
//line views/vproject/FileStats.html:51
}

//line views/vproject/FileStats.html:51
func (p *FileStats) Body(as *app.State, ps *cutil.PageState) string {
//line views/vproject/FileStats.html:51
	qb422016 := qt422016.AcquireByteBuffer()
//line views/vproject/FileStats.html:51
	p.WriteBody(qb422016, as, ps)
//line views/vproject/FileStats.html:51
	qs422016 := string(qb422016.B)
//line views/vproject/FileStats.html:51
	qt422016.ReleaseByteBuffer(qb422016)
//line views/vproject/FileStats.html:51
	return qs422016
//line views/vproject/FileStats.html:51
}

//line views/vproject/FileStats.html:53
func streampathLinks(qw422016 *qt422016.Writer, pth []string, ext string) {
//line views/vproject/FileStats.html:53
	qw422016.N().S(`<a href="?`)
//line views/vproject/FileStats.html:54
	if ext != `` {
//line views/vproject/FileStats.html:54
		qw422016.N().S(`ext=`)
//line views/vproject/FileStats.html:54
		qw422016.E().S(ext)
//line views/vproject/FileStats.html:54
	}
//line views/vproject/FileStats.html:54
	qw422016.N().S(`">.</a>`)
//line views/vproject/FileStats.html:55
	for idx, px := range pth {
//line views/vproject/FileStats.html:55
		qw422016.N().S(`/<a href="?dir=`)
//line views/vproject/FileStats.html:56
		qw422016.N().U(filepath.Join(pth[:idx+1]...))
//line views/vproject/FileStats.html:56
		if ext != `` {
//line views/vproject/FileStats.html:56
			qw422016.N().S(`&ext=`)
//line views/vproject/FileStats.html:56
			qw422016.E().S(ext)
//line views/vproject/FileStats.html:56
		}
//line views/vproject/FileStats.html:56
		qw422016.N().S(`">`)
//line views/vproject/FileStats.html:56
		qw422016.E().S(px)
//line views/vproject/FileStats.html:56
		qw422016.N().S(`</a>`)
//line views/vproject/FileStats.html:57
	}
//line views/vproject/FileStats.html:58
}

//line views/vproject/FileStats.html:58
func writepathLinks(qq422016 qtio422016.Writer, pth []string, ext string) {
//line views/vproject/FileStats.html:58
	qw422016 := qt422016.AcquireWriter(qq422016)
//line views/vproject/FileStats.html:58
	streampathLinks(qw422016, pth, ext)
//line views/vproject/FileStats.html:58
	qt422016.ReleaseWriter(qw422016)
//line views/vproject/FileStats.html:58
}

//line views/vproject/FileStats.html:58
func pathLinks(pth []string, ext string) string {
//line views/vproject/FileStats.html:58
	qb422016 := qt422016.AcquireByteBuffer()
//line views/vproject/FileStats.html:58
	writepathLinks(qb422016, pth, ext)
//line views/vproject/FileStats.html:58
	qs422016 := string(qb422016.B)
//line views/vproject/FileStats.html:58
	qt422016.ReleaseByteBuffer(qb422016)
//line views/vproject/FileStats.html:58
	return qs422016
//line views/vproject/FileStats.html:58
}

//line views/vproject/FileStats.html:60
func streamrenderFiles(qw422016 *qt422016.Writer, pth []string, files stats.FileStats, ext string, as *app.State, ps *cutil.PageState) {
//line views/vproject/FileStats.html:60
	qw422016.N().S(`
`)
//line views/vproject/FileStats.html:61
	if len(files) == 0 {
//line views/vproject/FileStats.html:61
		qw422016.N().S(`  <p><em>No files available</em></p>
`)
//line views/vproject/FileStats.html:63
	} else {
//line views/vproject/FileStats.html:63
		qw422016.N().S(`  <ul class="accordion">
`)
//line views/vproject/FileStats.html:65
		for _, f := range files {
//line views/vproject/FileStats.html:65
			qw422016.N().S(`    `)
//line views/vproject/FileStats.html:66
			streamrenderFileStat(qw422016, pth, f, ext, as, ps)
//line views/vproject/FileStats.html:66
			qw422016.N().S(`
`)
//line views/vproject/FileStats.html:67
		}
//line views/vproject/FileStats.html:67
		qw422016.N().S(`  </ul>
`)
//line views/vproject/FileStats.html:69
	}
//line views/vproject/FileStats.html:70
}

//line views/vproject/FileStats.html:70
func writerenderFiles(qq422016 qtio422016.Writer, pth []string, files stats.FileStats, ext string, as *app.State, ps *cutil.PageState) {
//line views/vproject/FileStats.html:70
	qw422016 := qt422016.AcquireWriter(qq422016)
//line views/vproject/FileStats.html:70
	streamrenderFiles(qw422016, pth, files, ext, as, ps)
//line views/vproject/FileStats.html:70
	qt422016.ReleaseWriter(qw422016)
//line views/vproject/FileStats.html:70
}

//line views/vproject/FileStats.html:70
func renderFiles(pth []string, files stats.FileStats, ext string, as *app.State, ps *cutil.PageState) string {
//line views/vproject/FileStats.html:70
	qb422016 := qt422016.AcquireByteBuffer()
//line views/vproject/FileStats.html:70
	writerenderFiles(qb422016, pth, files, ext, as, ps)
//line views/vproject/FileStats.html:70
	qs422016 := string(qb422016.B)
//line views/vproject/FileStats.html:70
	qt422016.ReleaseByteBuffer(qb422016)
//line views/vproject/FileStats.html:70
	return qs422016
//line views/vproject/FileStats.html:70
}

//line views/vproject/FileStats.html:72
func streamrenderTypes(qw422016 *qt422016.Writer, pth []string, files stats.FileStats, ext string, as *app.State, ps *cutil.PageState) {
//line views/vproject/FileStats.html:72
	qw422016.N().S(`
`)
//line views/vproject/FileStats.html:74
	exts := files.Extensions()

//line views/vproject/FileStats.html:76
	if len(files) == 0 {
//line views/vproject/FileStats.html:76
		qw422016.N().S(`  <p><em>No files available</em></p>
`)
//line views/vproject/FileStats.html:78
	} else {
//line views/vproject/FileStats.html:78
		qw422016.N().S(`  <ul>
`)
//line views/vproject/FileStats.html:80
		for _, extKey := range util.ArraySorted(lo.Keys(exts)) {
//line views/vproject/FileStats.html:80
			qw422016.N().S(`    <li><a href="?ext=`)
//line views/vproject/FileStats.html:81
			qw422016.E().S(extKey)
//line views/vproject/FileStats.html:81
			if len(pth) > 0 {
//line views/vproject/FileStats.html:81
				qw422016.N().S(`&pth=`)
//line views/vproject/FileStats.html:81
				qw422016.N().U(strings.Join(pth, `/`))
//line views/vproject/FileStats.html:81
			}
//line views/vproject/FileStats.html:81
			qw422016.N().S(`">`)
//line views/vproject/FileStats.html:81
			qw422016.E().S(extKey)
//line views/vproject/FileStats.html:81
			qw422016.N().S(`</a>: `)
//line views/vproject/FileStats.html:81
			qw422016.N().D(exts[extKey])
//line views/vproject/FileStats.html:81
			qw422016.N().S(`</li>
`)
//line views/vproject/FileStats.html:82
		}
//line views/vproject/FileStats.html:82
		qw422016.N().S(`  </ul>
`)
//line views/vproject/FileStats.html:84
	}
//line views/vproject/FileStats.html:85
}

//line views/vproject/FileStats.html:85
func writerenderTypes(qq422016 qtio422016.Writer, pth []string, files stats.FileStats, ext string, as *app.State, ps *cutil.PageState) {
//line views/vproject/FileStats.html:85
	qw422016 := qt422016.AcquireWriter(qq422016)
//line views/vproject/FileStats.html:85
	streamrenderTypes(qw422016, pth, files, ext, as, ps)
//line views/vproject/FileStats.html:85
	qt422016.ReleaseWriter(qw422016)
//line views/vproject/FileStats.html:85
}

//line views/vproject/FileStats.html:85
func renderTypes(pth []string, files stats.FileStats, ext string, as *app.State, ps *cutil.PageState) string {
//line views/vproject/FileStats.html:85
	qb422016 := qt422016.AcquireByteBuffer()
//line views/vproject/FileStats.html:85
	writerenderTypes(qb422016, pth, files, ext, as, ps)
//line views/vproject/FileStats.html:85
	qs422016 := string(qb422016.B)
//line views/vproject/FileStats.html:85
	qt422016.ReleaseByteBuffer(qb422016)
//line views/vproject/FileStats.html:85
	return qs422016
//line views/vproject/FileStats.html:85
}

//line views/vproject/FileStats.html:87
func streamrenderFileStat(qw422016 *qt422016.Writer, pth []string, f *stats.FileStat, ext string, as *app.State, ps *cutil.PageState) {
//line views/vproject/FileStats.html:87
	qw422016.N().S(`
  <li>
    <input id="accordion-`)
//line views/vproject/FileStats.html:89
	qw422016.E().S(f.FullPath())
//line views/vproject/FileStats.html:89
	qw422016.N().S(`" type="checkbox" hidden />
    <label for="accordion-`)
//line views/vproject/FileStats.html:90
	qw422016.E().S(f.FullPath())
//line views/vproject/FileStats.html:90
	qw422016.N().S(`">`)
//line views/vproject/FileStats.html:90
	streamrenderFileStatSummary(qw422016, f, ext, ps)
//line views/vproject/FileStats.html:90
	qw422016.N().S(`</label>
    <div class="bd">
`)
//line views/vproject/FileStats.html:92
	if len(f.Kids) > 0 {
//line views/vproject/FileStats.html:92
		qw422016.N().S(`      <ul class="accordion">
`)
//line views/vproject/FileStats.html:94
		for _, k := range f.Kids {
//line views/vproject/FileStats.html:94
			qw422016.N().S(`        `)
//line views/vproject/FileStats.html:95
			streamrenderFileStat(qw422016, append(slices.Clone(pth), f.Name), k, ext, as, ps)
//line views/vproject/FileStats.html:95
			qw422016.N().S(`
`)
//line views/vproject/FileStats.html:96
		}
//line views/vproject/FileStats.html:96
		qw422016.N().S(`      </ul>
    </div>
    `)
//line views/vproject/FileStats.html:99
	}
//line views/vproject/FileStats.html:99
	qw422016.N().S(`
  </li>
`)
//line views/vproject/FileStats.html:101
}

//line views/vproject/FileStats.html:101
func writerenderFileStat(qq422016 qtio422016.Writer, pth []string, f *stats.FileStat, ext string, as *app.State, ps *cutil.PageState) {
//line views/vproject/FileStats.html:101
	qw422016 := qt422016.AcquireWriter(qq422016)
//line views/vproject/FileStats.html:101
	streamrenderFileStat(qw422016, pth, f, ext, as, ps)
//line views/vproject/FileStats.html:101
	qt422016.ReleaseWriter(qw422016)
//line views/vproject/FileStats.html:101
}

//line views/vproject/FileStats.html:101
func renderFileStat(pth []string, f *stats.FileStat, ext string, as *app.State, ps *cutil.PageState) string {
//line views/vproject/FileStats.html:101
	qb422016 := qt422016.AcquireByteBuffer()
//line views/vproject/FileStats.html:101
	writerenderFileStat(qb422016, pth, f, ext, as, ps)
//line views/vproject/FileStats.html:101
	qs422016 := string(qb422016.B)
//line views/vproject/FileStats.html:101
	qt422016.ReleaseByteBuffer(qb422016)
//line views/vproject/FileStats.html:101
	return qs422016
//line views/vproject/FileStats.html:101
}

//line views/vproject/FileStats.html:103
func streamrenderFileStatSummary(qw422016 *qt422016.Writer, f *stats.FileStat, ext string, ps *cutil.PageState) {
//line views/vproject/FileStats.html:105
	icon := "file"
	if f.IsDir {
		icon = "folder"
	}

//line views/vproject/FileStats.html:110
	components.StreamExpandCollapse(qw422016, 3, ps)
//line views/vproject/FileStats.html:110
	qw422016.N().S(`<div class="right"><em>`)
//line views/vproject/FileStats.html:111
	qw422016.E().S(util.ByteSizeSI(f.TotalSize()))
//line views/vproject/FileStats.html:111
	qw422016.N().S(`</em></div>`)
//line views/vproject/FileStats.html:112
	components.StreamSVGRef(qw422016, icon, 16, 16, `icon`, ps)
//line views/vproject/FileStats.html:113
	if f.IsDir {
//line views/vproject/FileStats.html:113
		qw422016.N().S(`<a href="?dir=`)
//line views/vproject/FileStats.html:114
		qw422016.N().U(f.FullPath())
//line views/vproject/FileStats.html:114
		if ext != `` {
//line views/vproject/FileStats.html:114
			qw422016.N().S(`&ext=`)
//line views/vproject/FileStats.html:114
			qw422016.E().S(ext)
//line views/vproject/FileStats.html:114
		}
//line views/vproject/FileStats.html:114
		qw422016.N().S(`">`)
//line views/vproject/FileStats.html:115
	}
//line views/vproject/FileStats.html:116
	qw422016.E().S(f.Name)
//line views/vproject/FileStats.html:117
	if f.IsDir {
//line views/vproject/FileStats.html:117
		qw422016.N().S(`</a>`)
//line views/vproject/FileStats.html:119
	}
//line views/vproject/FileStats.html:120
}

//line views/vproject/FileStats.html:120
func writerenderFileStatSummary(qq422016 qtio422016.Writer, f *stats.FileStat, ext string, ps *cutil.PageState) {
//line views/vproject/FileStats.html:120
	qw422016 := qt422016.AcquireWriter(qq422016)
//line views/vproject/FileStats.html:120
	streamrenderFileStatSummary(qw422016, f, ext, ps)
//line views/vproject/FileStats.html:120
	qt422016.ReleaseWriter(qw422016)
//line views/vproject/FileStats.html:120
}

//line views/vproject/FileStats.html:120
func renderFileStatSummary(f *stats.FileStat, ext string, ps *cutil.PageState) string {
//line views/vproject/FileStats.html:120
	qb422016 := qt422016.AcquireByteBuffer()
//line views/vproject/FileStats.html:120
	writerenderFileStatSummary(qb422016, f, ext, ps)
//line views/vproject/FileStats.html:120
	qs422016 := string(qb422016.B)
//line views/vproject/FileStats.html:120
	qt422016.ReleaseByteBuffer(qb422016)
//line views/vproject/FileStats.html:120
	return qs422016
//line views/vproject/FileStats.html:120
}
