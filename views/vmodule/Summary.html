{% import (
  "strings"
  "github.com/kyleu/projectforge/app/module"
  "github.com/kyleu/projectforge/views/components"
) %}

{% func Summary(mod *module.Module, path ...string) %}
  <div class="card">
    <div class="right"><a href="#modal-module"><button type="button">JSON</button></a></div>
    <h3>{%s mod.Title() %}</h3>
    <div class="mt">
      {%- if len(path) == 0 -%}
      <a href="/m/{%s mod.Key %}/fs"><button>Filesystem</button></a>
      {%- else -%}
      {%- code var ctx []string -%}
      {%- for _, pth := range path -%}
      {%- code ctx = append(ctx, pth) -%}
      <a href="/m/{%s mod.Key %}/fs/{%s strings.Join(ctx, `/`) %}"><button>{%s pth %}}</button></a>
      {%- endfor -%}
      {%- endif -%}
    </div>
  </div>
  {%= components.JSONModal("module", "Module JSON", mod, 1) %}
{% endfunc %}
