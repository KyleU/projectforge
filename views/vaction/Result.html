{% import (
  "github.com/kyleu/projectforge/app"
  "github.com/kyleu/projectforge/app/controller/cutil"
  "github.com/kyleu/projectforge/app/action"
  "github.com/kyleu/projectforge/views/components"
  "github.com/kyleu/projectforge/views/layout"
  "github.com/kyleu/projectforge/views/vproject"
) %}

{% code type Result struct {
  layout.Basic
  Ctx *action.ResultContext
} %}

{% func (p *Result) Body(as *app.State, ps *cutil.PageState) %}
  {%- if p.Ctx.Prj != nil -%}
  {%= vproject.Summary(p.Ctx.Prj, ps) %}
  {%- endif -%}

  <div class="card">
    <div class="right">
      <a href="#modal-json"><button type="button">JSON</button></a>
    </div>
    <h3>Result</h3>
    <p>{%s p.Ctx.Res.Status %}</p>
  </div>

  {%= Detail(p.Ctx.Cfg, p.Ctx.Res, false, as, ps) %}

  {%= components.JSONModal("json", "JSON", p.Ctx, 1) %}
{% endfunc %}
