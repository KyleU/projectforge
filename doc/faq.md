# FAQ

## What is Project Forge?

[Project Forge](https://projectforge.dev) helps you build and maintain feature-rich applications written in the Go programming language.

It's a code-generation platform that uses modules, which are self-contained features for your app.
All managed projects expose a web and CLI interface, and additional modules are available for everything from OAuth to database access.

## What CLI commands are available?

- `all`: (default action) Starts the main http server on port 40000 and the marketing site on port 40001
- `audit`: Audits the project files, detecting invalid files and empty folders
- `build`: Builds the project, many options available, see below
- `completion`: Generate the autocompletion script for the specified shell
- `create`: Creates a new project
- `debug`: Dumps a ton of information about the project
- `doctor`: Makes sure your machine has the required dependencies
- `generate`: Applies pending changes to files as required
- `git`: Handles git operations, many options available, see below
- `help`: Help about any command
- `preview`: Show what would happen if you generate
- `server`: Starts the http server on port 40000 (by default)
- `site`: Starts the marketing site on port 40000 (by default)
- `svg`: Builds the project's SVG files
- `update`: Refreshes downloaded assets such as modules
- `upgrade`: Upgrades projectforge to the latest published version
- `validate`: Validates the project config
- `version`: Displays the version and exits


## What build options are available?

- `build`: Runs [make build]
- `clean`: Runs [make clean]
- `cleanup`: Cleans up file permissions
- `clientBuild`: Runs [bin/build/client.sh]
- `clientInstall`: Installs dependencies for the TypeScript client
- `deployments`: Manages deployments
- `deps`: Manages Go dependencies
- `format`: Runs [bin/format.sh]
- `imports`: Reorders the imports
- `lint`: Runs [bin/check.sh]
- `packages`: Visualize your application's packages
- `test`: Does a test
- `tidy`: Runs [go mod tidy]


## What git actions are available?

Common git actions like `status`, `fetch`, `pull` and `commit` do exactly what you'd expect.
There's also a `magic` action, which is a little crazy:
- If there are uncommitted changes, it will stash them
- If there are pending upstream commits, it will pull them
- If a stash was previously created, it will pop and commit it
- If commits exist that haven't been pushed, it will push them


## What modules are available?

- `android`: Webview-based application and Android build
- `audit`: Using the database module, provides an audit framework for tracking changes
- `core`: Provides common utilities for a Go application
- `database`: Provides an API for accessing relational databases
- `databaseui`: Provides a UI for registered databases
- `desktop`: Provides a desktop application using the system's webview
- `docbrowse`: Provides a UI for browsing the documentation
- `export`: Generates code based on the project's schema
- `expression`: Exposes CEL engine for evaluating arbitrary expressions
- `filesystem`: Provides an abstraction around local and remote filesystems
- `graphql`: Supports GraphQL APIs within your application
- `ios`: Webview-based application and iOS build
- `marketing`: Provides a website for downloads, tutorials, and marketing
- `migration`: Database migrations and a common PostgreSQL or SQLite database
- `mysql`: Provides an API for accessing MySQL databases
- `notarize`: Sends files to Apple for notarization
- `oauth`: Provides logins and session management for many OAuth providers
- `postgres`: Provides an API for accessing PostgreSQL databases
- `readonlydb`: Adds a read-only database connection
- `sandbox`: Useful playgrounds for testing custom functions
- `schema`: Classes for representing a collection of models; depends on the types module
- `search`: Adds search facilities to the top-level navigation bar
- `sqlite`: Provides an API for accessing SQLite databases
- `types`: Classes for representing common data types
- `upgrade`: Provides in-place version upgrades using Github Releases
- `websocket`: Provides an API for hosting WebSocket connections


## What actions are available for my project from the UI?

TODO


## What is provided in the TypeScript application?

TODO


## How do I use custom modules?

TODO


## How do I manage more than one Project Forge project at once?

TODO


## How are static assets served?

TODO


## How do I work with SVG icons?

To see available icons, click the `SVG` button on your project's page.
To add a new icon, enter the name of the icon from [Line Awesome](https://icons8.com/line-awesome) or paste a URL.
When added, the icon is rewritten to support themes/styling and references.

To reference an icon, add `{%= components.SVG("star") %}` in your template.


## What's this PF_SECTION crap?

Most files are either fully-generated by Project Forge, or completely custom to your application.
Some files are managed but also support custom code. The text you place inside a PF_SECTION will be preserved when your project is updated.

As always, adding `$PF_IGNORE$` at the top of your file causes it to be skipped entirely.


## What administrative functions are available?

Assuming you've got access, going to `/admin` will show you the available actions:

- CPU/memory profiling and visualization, runtime heap dumps
- Garbage collection management and metrics
- View your projects Go modules, internal and external
- Theme management, with theme catalogs and live preview
- Lots of HTTP tools, for investigating sessions or request


## How can I secure my application?


## What options are available for the HTML menu and breadcrumbs?


## What search facilities are available?


## What utility methods are available for my app?

_So many_. See the files in `./app/util`, there's a ton of juicy stuff.


## How do I add a new model and service?

TODO


## How do I make a new HTTP action?

Create a new file in `app/controller` or a child directory, then add your method.
The usual form is:

```go
// All controller actions require a fasthttp request/response
func CurrentTime(rc *fasthttp.RequestCtx) {
	// The Act method wires up the page state for your logic
	Act("current.time", rc, func(as *app.State, ps *cutil.PageState) (string, error) {
		// The PageState::Title is used as the HTML title
		ps.Title = "The current server time for " + util.AppName
		// For example purposes
		t := util.TimeCurrent()
		// PageState::Data will be rendered as JSON or XML if the Content-Type of the request matches
		ps.Data = t
		// The Render method will send the template contents if HTML is requested. The final argument refers to the active menu key
		return Render(rc, as, &views.CurrentTime{Time: t}, ps, "time")
	})
}
```

Add your action to `./app/controller/routes/routes.go` like so:

```go
r.GET("/time", controller.CurrentTime)
```

Then create a menu item in `./app/controller/cmenu/menu.go` like so:

```go
i := &menu.Item{Key: "time", Title: "Current Time", Description: "...", Icon: "star", Route: "/time"}
ret = append(ret, i)
```

Templates are written in [quicktemplate](https://github.com/valyala/quicktemplate), and generally take this form:

```html
{% code type CurrentTime struct {
  layout.Basic
  Time time.Time
} %}

{% func (p *CurrentTime) Body(as *app.State, ps *cutil.PageState) %}
  <div class="card">
    <h3>{%= components.SVGRefIcon(`calendar`, ps) %}The Current Time!</h3>
    <p>{%s fmt.Sprint(p.Time) %}</p>
  </div>
{% endfunc %}
```

The `layout.Basic` renders menu and navigation, and is swappable for custom response types.
